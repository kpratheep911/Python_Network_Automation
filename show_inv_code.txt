show inventory project 


import paramiko

username = "<your user name>"
password = "<your device password>"

# Input and output files
hosts_file = "corehosts.txt"
output_file = "coreswitch_inventory_results.txt"

# Load all hostnames
with open(hosts_file) as f:
 hosts = [line.strip() for line in f if line.strip()]

with open(output_file, "w") as out:
 for host in hosts:
 try:
 out.write("\n==============================\n")
 out.write(f"Connecting to {host}...\n")
 print(f"\n==============================")
 print(f"Connecting to {host}...")

 ssh = paramiko.SSHClient()
 ssh.set_missing_host_key_policy(paramiko.AutoAddPolicy())
 ssh.connect(host, username=username, password=password, timeout=10)

 # Run "show inventory"
 stdin, stdout, stderr = ssh.exec_command("show inventory")
 output = stdout.read().decode()

 out.write(f"Inventory for {host}:\n")
 out.write(output.strip() + "\n")
 print(f"Inventory for {host}:\n")
 print(output.strip())

 ssh.close()
 except Exception as e:
 error_msg = f"{host} â†’ Connection failed: {e}\n"
 out.write(error_msg)
 print(error_msg)

print(f"\n All results saved in {output_file}")
